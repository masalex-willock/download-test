// DATA
const music = [
  {
    artists: ['Mike Reins'],
    song: 'Baby wange',
    genre: 'Pop',
    studio: 'Rock Talk Studio',
    duration: null,
    premierDate: new Date('2018,07,12,14:53'),

    tags: ['Only me', 'Love', 'Oxy Gen', 'Legit Media'],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: 'https://masalex8.wordpress.com',

      lyricsLink: 'none',
      lyricsVideo: 'none',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: 'Oxy Gen',
      director: 'Masalex8',
    }
  },

  {
    artists: ['LEGIT MEDIA all stars'],
    song: 'Chiki dance',
    genre: 'Pop',
    studio: 'G1 Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["cizar shem", "dance style"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },
  
  {
    artists: ['Oxy Gen', 'Royal Ivan'],
    song: 'Fafagula',
    genre: 'DanceHall',
    studio: 'G1 Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["cizar shem", "Shake It"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: 'Cesor Shem',
      director: 'Masalex8',
    }
  },

  {
    artists: ['Dizzo West'],
    song: 'Girlfriend',
    genre: 'Pop',
    studio: 'Uptown Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Lugisu"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },
  
  {
    artists: ['Oxy Gen', 'Delta Fika'],
    song: 'Lord I know',
    genre: 'Gospel',
    studio: 'G1 records',
    duration: null,
    premierDate: new Date(''),

    tags: ["Almighty God", "Love", 'Black son'],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },

  {
    artists: ['TL Kamino'],
    song: 'Kola bwoti',
    genre: 'Pop',
    studio: 'Uptown Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Nambeshe"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },
  
  {
    artists: ['Oxy Gen', 'Sweet Nyc', 'Delta Fika'],
    song: 'Mukidongo',
    genre: 'Ragga',
    studio: 'G1 Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Nambeshe"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },

  {
    artists: ['Sweet Nyc'],
    song: 'Nze kabaka',
    genre: 'DanceHall',
    studio: 'G1 Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Nambeshe"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },

  {
    artists: ['Oxy Gen', 'Delta Fika'],
    song: 'Tewekyanga',
    genre: 'Pop',
    studio: 'G1 Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Nambeshe"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },

  {
    artists: ['Oxy Gen', 'Delta Fika'],
    song: 'Zig zag',
    genre: 'DanceHall',
    studio: 'G1 Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Nambeshe"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },

  {
    artists: ['Oxy Gen'],
    song: 'Nkumatila',
    genre: 'Pop',
    studio: 'Rock Talk Studios',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Nambeshe"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },

  {
    artists: ['Top Most'],
    song: 'Olugambo',
    genre: 'HipHop',
    studio: 'Uptown Records',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Nambeshe"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },

  {
    artists: ['Oxy Gen', 'Delta Fika'],
    song: 'Waali emergency',
    genre: 'Pop',
    studio: 'Rock Talk Studio',
    duration: null,
    premierDate: new Date(''),

    tags: ["Walter Pro", "Nambeshe"],
    poster: ``,

    links: {
      instrumentalLink: null,
      videoLink: '',

      lyricsLink: '',
      lyricsVideo: '',

      socialLinks: {
        legitChat: null,

        facebook: null,
        twitter: null,
        instagram: null,
        soundcloud: null,
        
      }
    },
    others: {
      licence: 'MIT',
      producer: '',
      director: 'Masalex8',
    }
  },
]

const artists = [
  {
    name: 'Oxy Gen',
    songs: 12,
    talents: ['Vocalist', 'producer', 'Small scale Mechanic', 'footballer'],
    birthday: '20/07/2000',
    about: 'Started music in school at the age of 15 with two of my friends. Made a group called MOBs Ent that started well but fadedout as the members became more mature and more responsibility took their attention. Now am all for LEGIT Media headed by One masalex8 who personally persuaded me to join him. Currently I have 12 songs on the streamlines but more projects are in the pipeline chocking on one another, by the end of the year, I will have 31 songs but wait, they will be top songs I promise.'
  },
]

//DECLARATIONS
const sod = document.getElementById("sod");
let songsCount = music.length
let randNumber = Math.ceil(Math.random() * songsCount)
const singles = document.getElementById('singles')
const collabos = document.getElementById('collabos')
const popMusic = document.getElementById('pop')
const hiphop = document.getElementById('hiphop')
const ragga = document.getElementById('ragga')

let artistStr = ''



// THE EVENTS ARRAY


//UPDATES
sod.innerHTML = `
<p>Song : <span>${music[randNumber].song}</span></p>
    <p>By : <span>${music[randNumber].artists}</span></p>
    <p>Genre : <span>${music[randNumber].genre}</span></p>
    <audio src="./../media/audio/${music[randNumber].song} - ${artistStr}.mp3" controls></audio>
    <div class="">
      <a href="./../media/audio/${music[randNumber].song} - ${artistStr}.mp3" class="btn small" download>Download</a>
      <a href="" class="btn small btn-outline2">Share</a>
    </div>`


// test to the bottom
const element = document.createElement('audio')
element.setAttribute("controls", 'controls')
element.setAttribute("loop", true)

const sd = music.find(a => a.song == 'Girlfriend')
let upThere = `./../media/audio/${sd.song} - ${sd.artists}.mp3`

element.setAttribute('src', upThere)

element.style.position = 'fixed'
element.style.bottom = '0'; 
element.style.width = '80%';
element.style.marginLeft = '1rem';
document.body.append(element)

// singles fillup
singles.innerHTML = htmlStr(music.filter(a => a.artists.length == 1 && !a.artists[0].match(/all/gi)))
collabos.innerHTML = htmlStr(music.filter(a => a.artists.length > 1))
popMusic.innerHTML = htmlStr(music.filter(a => a.genre == 'Pop'))
hiphop.innerHTML = htmlStr(music.filter(a => a.genre == 'HipHop'))
ragga.innerHTML = htmlStr(music.filter(a => a.genre == 'Ragga')) + htmlStr(music.filter(a => a.genre == 'DanceHall'))

const allSongs = document.querySelectorAll('.song')
for (let each of allSongs) each.addEventListener('click', clicked)

// MULTI-PURPOSE FUNCTIIONS
function rand (obj){
  artistStr = obj.artists[0]
  for (let i = 1; i < obj.artists.length - 1; i ++)
    artistStr += ', ' + obj.artists[i]
  if(obj.artists.length > 1)
    artistStr += ' feat ' +  obj.artists[obj.artists.length - 1]
}

function songDetail(obj){
  let str = obj.song + ' - ' + obj.artists[0]
  for (let i = 1; i < obj.artists.length - 1; i ++)
    str += ', ' + obj.artists[i]
  if(obj.artists.length > 1)
    str += ' feat ' +  obj.artists[obj.artists.length - 1]

  return str
}

function htmlStr(arr){
  let result = ''
  for (let each of arr){
    result += `
    <div class="song">
      <span>${each.song} by</span>
      <span>${songDetail(each).split(' - ')[1]}</span><br>
      <span>
        <time>${each.premierDate}</time>
        <span>${each.genre}</span>
      </span><br>
    
      <a href="./../media/audio/${songDetail(each)}.mp3" class="btn small circle" download>↓</a>
      <a class="btn small circle">►</a>
      <a href="" class="btn small round-b" download>Share</a>
    </div>
    `
  }

  return result
}

function clicked(){
  
}

